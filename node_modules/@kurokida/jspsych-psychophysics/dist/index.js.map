{"version":3,"file":"index.js","sources":["../package.json","../src/index.ts"],"sourcesContent":["{\r\n  \"name\": \"@kurokida/jspsych-psychophysics\",\r\n  \"version\": \"4.1.0\",\r\n  \"description\": \"A jsPsych plugin for conducting online/Web-based psychophysical experiments\",\r\n  \"type\": \"module\",\r\n  \"main\": \"dist/index.cjs\",\r\n  \"exports\": {\r\n    \"import\": \"./dist/index.js\",\r\n    \"require\": \"./dist/index.cjs\"\r\n  },\r\n  \"typings\": \"dist/index.d.ts\",\r\n  \"unpkg\": \"dist/index.browser.min.js\",\r\n  \"files\": [\r\n    \"src\",\r\n    \"dist\"\r\n  ],\r\n  \"source\": \"src/index.ts\",\r\n  \"scripts\": {\r\n    \"tsc\": \"tsc\",\r\n    \"build\": \"rollup --config && npm run copy\",\r\n    \"build:watch\": \"rollup --config --watch\",\r\n    \"copy\": \"cp dist/index.browser.js jspsych-psychophysics.js || copy dist\\\\index.browser.js jspsych-psychophysics.js\",\r\n    \"prepare\": \"npm run build\"\r\n  },\r\n  \"repository\": {\r\n    \"type\": \"git\",\r\n    \"url\": \"git+https://github.com/kurokida/jspsych-psychophysics.git\"\r\n  },\r\n  \"author\": \"Daiichiro Kuroki\",\r\n  \"license\": \"MIT\",\r\n  \"bugs\": {\r\n    \"url\": \"https://github.com/kurokida/jspsych-psychophysics/issues\"\r\n  },\r\n  \"homepage\": \"https://jspsychophysics.hes.kyushu-u.ac.jp/\",\r\n  \"publishConfig\": {\r\n    \"access\": \"public\"\r\n  },\r\n  \"peerDependencies\": {\r\n    \"jspsych\": \"^8.2.0\"\r\n  },\r\n  \"devDependencies\": {\r\n    \"@jspsych/config\": \"^3.2.1\",\r\n    \"@jspsych/test-utils\": \"^1.2.0\",\r\n    \"jspsych\": \"^8.2.0\"\r\n  },\r\n  \"dependencies\": {\r\n    \"ml-matrix\": \"^6.10.2\",\r\n    \"pixi.js\": \"^6.5.5\"\r\n  }\r\n}\r\n","/**\r\n * jspsych-psychophysics\r\n * Copyright (c) 2019 Daiichiro Kuroki\r\n * Released under the MIT license\r\n *\r\n * jspsych-psychophysics is a plugin for conducting online/Web-based psychophysical experiments using jsPsych (de Leeuw, 2015).\r\n *\r\n * Please see\r\n * http://jspsychophysics.hes.kyushu-u.ac.jp/\r\n * about how to use this plugin.\r\n *\r\n * This application uses following libraries\r\n *  ml-matrix: Copyright (c) 2014 Michaël Zasso\r\n *  PixiJS: Copyright (c) 2013-2023 Mathew Groves, Chad Engler\r\n **/\r\n\r\n\r\nimport { JsPsych, JsPsychPlugin, ParameterType, TrialType } from \"jspsych\";\r\nimport { Matrix } from \"ml-matrix\";\r\nimport * as PIXI from \"pixi.js\";\r\nimport { version } from \"../package.json\"; \r\n\r\nconsole.log(`Psychophysics Version ${version}`);\r\n\r\nif (typeof PIXI.VERSION !== \"undefined\"){\r\n  console.log(`PixiJS Version ${PIXI.VERSION}`)\r\n};\r\n\r\nconst info = {\r\n  name: \"psychophysics\",\r\n  version: version,\r\n  description:\r\n    \"A plugin for conducting online/Web-based psychophysical experiments\",\r\n  parameters: {\r\n    stimuli: {\r\n      type: ParameterType.COMPLEX, // This is similar to the quesions of the survey-likert.\r\n      array: true,\r\n      pretty_name: \"Stimuli\",\r\n      description: \"The objects will be presented in the canvas.\",\r\n      nested: {\r\n        startX: {\r\n          type: ParameterType.STRING,\r\n          pretty_name: \"startX\",\r\n          default: \"center\",\r\n          description: \"The horizontal start position.\",\r\n        },\r\n        startY: {\r\n          type: ParameterType.STRING,\r\n          pretty_name: \"startY\",\r\n          default: \"center\",\r\n          description: \"The vertical start position.\",\r\n        },\r\n        endX: {\r\n          type: ParameterType.STRING,\r\n          pretty_name: \"endX\",\r\n          default: null,\r\n          description: \"The horizontal end position.\",\r\n        },\r\n        endY: {\r\n          type: ParameterType.STRING,\r\n          pretty_name: \"endY\",\r\n          default: null,\r\n          description: \"The vertical end position.\",\r\n        },\r\n        show_start_time: {\r\n          type: ParameterType.INT,\r\n          pretty_name: \"Show start time\",\r\n          default: 0,\r\n          description: \"Time to start presenting the stimuli\",\r\n        },\r\n        show_end_time: {\r\n          type: ParameterType.INT,\r\n          pretty_name: \"Show end time\",\r\n          default: null,\r\n          description: \"Time to end presenting the stimuli\",\r\n        },\r\n        show_start_frame: {\r\n          type: ParameterType.INT,\r\n          pretty_name: \"Show start frame\",\r\n          default: 0,\r\n          description: \"Time to start presenting the stimuli in frames\",\r\n        },\r\n        show_end_frame: {\r\n          type: ParameterType.INT,\r\n          pretty_name: \"Show end frame\",\r\n          default: null,\r\n          description: \"Time to end presenting the stimuli in frames\",\r\n        },\r\n        line_width: {\r\n          type: ParameterType.INT,\r\n          pretty_name: \"Line width\",\r\n          default: 1,\r\n          description: \"The line width\",\r\n        },\r\n        lineJoin: {\r\n          type: ParameterType.STRING,\r\n          pretty_name: \"lineJoin\",\r\n          default: \"miter\",\r\n          description: \"The type of the corner when two lines meet.\",\r\n        },\r\n        miterLimit: {\r\n          type: ParameterType.INT,\r\n          pretty_name: \"miterLimit\",\r\n          default: 10,\r\n          description: \"The maximum miter length.\",\r\n        },\r\n        drawFunc: {\r\n          // e.g., call-function\r\n          type: ParameterType.FUNCTION,\r\n          pretty_name: \"Draw function\",\r\n          default: null,\r\n          description:\r\n            \"This function enables to move objects horizontally and vertically.\",\r\n        },\r\n        change_attr: {\r\n          type: ParameterType.FUNCTION,\r\n          pretty_name: \"Change attributes\",\r\n          default: null,\r\n          description:\r\n            \"This function enables to change attributes of objects immediately before drawing.\",\r\n        },\r\n        is_frame: {\r\n          type: ParameterType.BOOL,\r\n          pretty_name: \"time is in frames\",\r\n          default: false,\r\n          description: \"If true, time is treated in frames.\",\r\n        },\r\n        prepared: {\r\n          type: ParameterType.BOOL,\r\n          pretty_name: \"Stimulus prepared flag\",\r\n          default: false,\r\n          description: \"If true, the stimulus is prepared for presentation\",\r\n        },\r\n        origin_center: {\r\n          type: ParameterType.BOOL,\r\n          pretty_name: \"origin_center\",\r\n          default: false,\r\n          description: \"The origin is the center of the window.\",\r\n        },\r\n        is_presented: {\r\n          type: ParameterType.BOOL,\r\n          pretty_name: \"is_presented\",\r\n          default: false,\r\n          description: \"This will be true when the stimulus is presented.\",\r\n        },\r\n        trial_ends_after_audio: {\r\n          type: ParameterType.BOOL,\r\n          pretty_name: \"Trial ends after audio\",\r\n          default: false,\r\n          description:\r\n            \"If true, then the trial will end as soon as the audio file finishes playing.\",\r\n        },\r\n        modulate_color: {\r\n          type: ParameterType.FLOAT,\r\n          array: true,\r\n          pretty_name: \"modulate_color\",\r\n          default: [1.0, 1.0, 1.0, 1.0],\r\n          description: \"The base RGBA array of the gabor patch.\",\r\n        },\r\n        offset_color: {\r\n          type: ParameterType.FLOAT,\r\n          array: true,\r\n          pretty_name: \"offset_color\",\r\n          default: [0.5, 0.5, 0.5, 0.0],\r\n          description: \"The offset RGBA array of the gabor patch.\",\r\n        },\r\n        min_validModulationRange: {\r\n          type: ParameterType.FLOAT,\r\n          pretty_name: \"min_validModulationRange\",\r\n          default: -2,\r\n          description:\r\n            \"The minimum of the validation range of the gabor patch.\",\r\n        },\r\n        max_validModulationRange: {\r\n          type: ParameterType.FLOAT,\r\n          pretty_name: \"max_validModulationRange\",\r\n          default: 2,\r\n          description:\r\n            \"The maximum of the validation range of the gabor patch.\",\r\n        },\r\n        tilt: {\r\n          type: ParameterType.FLOAT,\r\n          pretty_name: \"tilt\",\r\n          default: 0,\r\n          description: \"The angle of the gabor patch in degrees.\",\r\n        },\r\n        sf: {\r\n          type: ParameterType.FLOAT,\r\n          pretty_name: \"spatial frequency\",\r\n          default: 0.05,\r\n          description: \"The spatial frequency of the gabor patch.\",\r\n        },\r\n        phase: {\r\n          type: ParameterType.FLOAT,\r\n          pretty_name: \"phase\",\r\n          default: 0,\r\n          description: \"The phase (degrees) of the gabor patch.\",\r\n        },\r\n        sc: {\r\n          type: ParameterType.FLOAT,\r\n          pretty_name: \"standard deviation\",\r\n          default: 20,\r\n          description: \"The standard deviation of the distribution.\",\r\n        },\r\n        contrast: {\r\n          type: ParameterType.FLOAT,\r\n          pretty_name: \"contrast\",\r\n          default: 20,\r\n          description: \"The contrast of the gabor patch.\",\r\n        },\r\n        contrastPreMultiplicator: {\r\n          type: ParameterType.FLOAT,\r\n          pretty_name: \"contrastPreMultiplicator\",\r\n          default: 1,\r\n          description: \"A scaling factor\",\r\n        },\r\n        drift: {\r\n          type: ParameterType.FLOAT,\r\n          pretty_name: \"drift\",\r\n          default: 0,\r\n          description: \"The velocity of the drifting gabor patch.\",\r\n        },\r\n        method: {\r\n          type: ParameterType.STRING,\r\n          pretty_name: \"gabor_drawing_method\",\r\n          default: \"ml-matrix\",\r\n          description: \"The method of drawing the gabor patch.\",\r\n        },\r\n        disableNorm: {\r\n          type: ParameterType.BOOL,\r\n          pretty_name: \"disableNorm\",\r\n          default: false,\r\n          description: \"Disable normalization of the gaussian function.\",\r\n        },\r\n        disableGauss: {\r\n          type: ParameterType.BOOL,\r\n          pretty_name: \"disableGauss\",\r\n          default: false,\r\n          description: \"Disable to convolve with a Gaussian.\",\r\n        },\r\n        mask_func: {\r\n          type: ParameterType.FUNCTION,\r\n          pretty_name: \"Masking function\",\r\n          default: null,\r\n          description: \"Masking the image manually.\",\r\n        },\r\n        text_color: {\r\n          type: ParameterType.STRING,\r\n          pretty_name: \"text color\",\r\n          default: \"#000000\",\r\n          description: \"The color of the text.\",\r\n        },\r\n        fontStyle: {\r\n          type: ParameterType.STRING,\r\n          pretty_name: \"font style\",\r\n          default: \"normal\",\r\n          description: \"Font style\",\r\n        },\r\n        fontWeight: {\r\n          type: ParameterType.STRING,\r\n          pretty_name: \"font weight\",\r\n          default: \"normal\",\r\n          description: \"Font weight\",\r\n        },\r\n        fontSize: {\r\n          type: ParameterType.STRING,\r\n          pretty_name: \"font size\",\r\n          default: \"20px\",\r\n          description: \"Font size\",\r\n        },\r\n        fontFamily: {\r\n          type: ParameterType.STRING,\r\n          pretty_name: \"font family\",\r\n          default: \"Verdana, Arial, Helvetica, sans-serif\",\r\n          description: \"Font family\",\r\n        },\r\n      },\r\n    },\r\n    pixi: {\r\n      type: ParameterType.BOOL,\r\n      pretty_name: \"Enable Pixi\",\r\n      default: false,\r\n      description: \"If true, this plugin will use PixiJS\",\r\n    },\r\n    remain_canvas: {\r\n      type: ParameterType.BOOL,\r\n      pretty_name: \"Remain canvas\",\r\n      default: false,\r\n      description: \"If true, the main canvas remains for the next trial.\",\r\n    },\r\n    choices: {\r\n      type: ParameterType.KEYS,\r\n      pretty_name: \"Choices\",\r\n      default: \"ALL_KEYS\",\r\n      description:\r\n        \"The keys the subject is allowed to press to respond to the stimulus.\",\r\n    },\r\n    prompt: {\r\n      type: ParameterType.HTML_STRING,\r\n      pretty_name: \"Prompt\",\r\n      default: null,\r\n      description: \"Any content here will be displayed below the stimulus.\",\r\n    },\r\n    upper_prompt: {\r\n      type: ParameterType.HTML_STRING,\r\n      pretty_name: \"Upper prompt\",\r\n      default: null,\r\n      description: \"Any content here will be displayed above the stimulus.\",\r\n    },\r\n    lower_prompt: {\r\n      type: ParameterType.HTML_STRING,\r\n      pretty_name: \"Lower prompt\",\r\n      default: null,\r\n      description: \"This is the same as the prompt.\",\r\n    },\r\n    canvas_width: {\r\n      type: ParameterType.INT,\r\n      pretty_name: \"Canvas width\",\r\n      default: null,\r\n      description: \"The width of the canvas.\",\r\n    },\r\n    canvas_height: {\r\n      type: ParameterType.INT,\r\n      pretty_name: \"Canvas height\",\r\n      default: null,\r\n      description: \"The height of the canvas.\",\r\n    },\r\n    canvas_offsetX: {\r\n      type: ParameterType.INT,\r\n      pretty_name: \"Canvas offset X\",\r\n      default: 0,\r\n      description: \"This value is subtracted from the width of the canvas.\",\r\n    },\r\n    canvas_offsetY: {\r\n      type: ParameterType.INT,\r\n      pretty_name: \"Canvas offset Y\",\r\n      default: 8,\r\n      description: \"This value is subtracted from the height of the canvas.\",\r\n    },\r\n    trial_duration: {\r\n      type: ParameterType.INT,\r\n      pretty_name: \"Trial duration\",\r\n      default: null,\r\n      description: \"How long to show trial before it ends.\",\r\n    },\r\n    response_ends_trial: {\r\n      type: ParameterType.BOOL,\r\n      pretty_name: \"Response ends trial\",\r\n      default: true,\r\n      description: \"If true, trial will end when subject makes a response.\",\r\n    },\r\n    background_color: {\r\n      type: ParameterType.STRING,\r\n      pretty_name: \"Background color\",\r\n      default: \"grey\",\r\n      description: \"The background color of the canvas.\",\r\n    },\r\n    response_type: {\r\n      type: ParameterType.STRING,\r\n      pretty_name: \"key, mouse or button\",\r\n      default: \"key\",\r\n      description: \"How to make a response.\",\r\n    },\r\n    response_start_time: {\r\n      type: ParameterType.INT,\r\n      pretty_name: \"Response start\",\r\n      default: 0,\r\n      description: \"When the subject is allowed to respond to the stimulus.\",\r\n    },\r\n    raf_func: {\r\n      type: ParameterType.FUNCTION,\r\n      pretty_name: \"Step function\",\r\n      default: null,\r\n      description: \"This function enables to move objects as you wish.\",\r\n    },\r\n    mouse_down_func: {\r\n      type: ParameterType.FUNCTION,\r\n      pretty_name: \"Mouse down function\",\r\n      default: null,\r\n      description:\r\n        \"This function is set to the event listener of the mousedown.\",\r\n    },\r\n    mouse_move_func: {\r\n      type: ParameterType.FUNCTION,\r\n      pretty_name: \"Mouse move function\",\r\n      default: null,\r\n      description:\r\n        \"This function is set to the event listener of the mousemove.\",\r\n    },\r\n    mouse_up_func: {\r\n      type: ParameterType.FUNCTION,\r\n      pretty_name: \"Mouse up function\",\r\n      default: null,\r\n      description: \"This function is set to the event listener of the mouseup.\",\r\n    },\r\n    key_down_func: {\r\n      type: ParameterType.FUNCTION,\r\n      pretty_name: \"Key down function\",\r\n      default: null,\r\n      description: \"This function is set to the event listener of the keydown.\",\r\n    },\r\n    key_up_func: {\r\n      type: ParameterType.FUNCTION,\r\n      pretty_name: \"Key up function\",\r\n      default: null,\r\n      description: \"This function is set to the event listener of the keyup.\",\r\n    },\r\n    touchstart_func: {\r\n      type: ParameterType.FUNCTION,\r\n      pretty_name: \"Touch start function\",\r\n      default: null,\r\n      description: \"This function is set to the event listener of the CANVAS touchstart.\",\r\n    },\r\n    touchend_func: {\r\n      type: ParameterType.FUNCTION,\r\n      pretty_name: \"Touch end function\",\r\n      default: null,\r\n      description: \"This function is set to the event listener of the CANVAS touchend.\",\r\n    },\r\n    touchcancel_func: {\r\n      type: ParameterType.FUNCTION,\r\n      pretty_name: \"Touch cancel function\",\r\n      default: null,\r\n      description: \"This function is set to the event listener of the CANVAS touchcancel.\",\r\n    },\r\n    touchmove_func: {\r\n      type: ParameterType.FUNCTION,\r\n      pretty_name: \"Touch move function\",\r\n      default: null,\r\n      description: \"This function is set to the event listener of the CANVAS touchmove.\",\r\n    },\r\n    button_choices: {\r\n      type: ParameterType.STRING,\r\n      pretty_name: \"Button choices\",\r\n      default: null,\r\n      description: \"The labels for the buttons.\",\r\n    },\r\n    button_html: {\r\n      type: ParameterType.FUNCTION,\r\n      default: function (choice: string, choice_index: number) {\r\n        return `<button class=\"jspsych-btn\">${choice}</button>`;\r\n      },\r\n    },\r\n    // These properties refer to https://github.com/jspsych/jsPsych/tree/main/packages/plugin-html-button-response\r\n    /** Setting to `'grid'` will make the container element have the CSS property `display: grid` and enable the use of `grid_rows` and `grid_columns`. Setting to `'flex'` will make the container element have the CSS property `display: flex`. You can customize how the buttons are laid out by adding inline CSS in the `button_html` parameter. */\r\n    button_layout: {\r\n      type: ParameterType.STRING,\r\n      default: \"grid\",\r\n    },\r\n    /**\r\n     * The number of rows in the button grid. Only applicable when `button_layout` is set to `'grid'`. If null, the number of rows will be determined automatically based on the number of buttons and the number of columns.\r\n     */\r\n    grid_rows: {\r\n      type: ParameterType.INT,\r\n      default: 1,\r\n    },\r\n    /**\r\n     * The number of columns in the button grid. Only applicable when `button_layout` is set to `'grid'`. If null, the number of columns will be determined automatically based on the number of buttons and the number of rows.\r\n     */\r\n    grid_columns: {\r\n      type: ParameterType.INT,\r\n      default: null,\r\n    },\r\n    vert_button_margin: {\r\n      type: ParameterType.STRING,\r\n      pretty_name: \"Margin vertical\",\r\n      default: \"0px\",\r\n      description: \"The vertical margin of the button.\",\r\n    },\r\n    horiz_button_margin: {\r\n      type: ParameterType.STRING,\r\n      pretty_name: \"Margin horizontal\",\r\n      default: \"8px\",\r\n      description: \"The horizontal margin of the button.\",\r\n    },\r\n    clear_canvas: {\r\n      type: ParameterType.BOOL,\r\n      pretty_name: \"clear_canvas\",\r\n      default: true,\r\n      description: \"Clear the canvas per frame.\",\r\n    },\r\n  },\r\n  data: {\r\n    rt: {\r\n      type: ParameterType.INT,\r\n    },\r\n    response_type: {\r\n      type: ParameterType.STRING,\r\n    },\r\n    key_press: {\r\n      type: ParameterType.STRING,\r\n    },\r\n    response: {\r\n      type: ParameterType.STRING,\r\n    },\r\n    avg_frame_time: {\r\n      type: ParameterType.FLOAT,\r\n    },\r\n    click_x: {\r\n      type: ParameterType.FLOAT,\r\n    },\r\n    click_y: {\r\n      type: ParameterType.FLOAT,\r\n    },\r\n    center_x: {\r\n      type: ParameterType.FLOAT,\r\n    },\r\n    center_y: {\r\n      type: ParameterType.FLOAT,\r\n    },\r\n    button_pressed: {\r\n      type: ParameterType.INT,\r\n    },\r\n    stimulus: {\r\n      type: ParameterType.HTML_STRING,\r\n    },\r\n  },\r\n\r\n};\r\n\r\ntype Info = typeof info;\r\n\r\n// Hack (because nested types are not yet supported by `TrialType` itself): Make use of TrialType to\r\n// infer a `Stimulus` type\r\ntype Stimulus = TrialType<{\r\n  name: string;\r\n  parameters: Info[\"parameters\"][\"stimuli\"][\"nested\"];\r\n}>;\r\n\r\n/**\r\n * ** Psychophysics **\r\n *\r\n * Multiple stimulus objects that are frequently used in psychophysical experiments can be used in a single trial.\r\n *\r\n * @author Daiichiro Kuroki\r\n * @see {@link https://jspsychophysics.hes.kyushu-u.ac.jp/ DOCUMENTATION LINK TEXT}\r\n */\r\nclass PsychophysicsPlugin implements JsPsychPlugin<Info> {\r\n  static info = info;\r\n\r\n  constructor(private jsPsych: JsPsych) {}\r\n\r\n  trial(\r\n    display_element: HTMLElement,\r\n    trial: TrialType<Info> & Record<string, any>\r\n  ) {\r\n    // returns an array starting with 'start_num' of which length is 'count'.\r\n    function getNumbering(start_num, count) {\r\n      return [...Array(count)].map((_, i) => i + start_num);\r\n    }\r\n\r\n    const canvas_for_color = document.createElement(\"canvas\");\r\n    canvas_for_color.id = \"canvas_for_color\";\r\n    canvas_for_color.style.display = \"none\";\r\n    const ctx_for_color = canvas_for_color.getContext(\"2d\");\r\n\r\n    // 'blue' -> 255\r\n    function getColorNum(color_str) {\r\n      ctx_for_color.fillStyle = color_str;\r\n      const col = ctx_for_color.fillStyle;\r\n      const col2 =\r\n        col[1] + col[2] + col[3] + col[4] + col[5] + col[6] + col[7] + col[8];\r\n      return parseInt(col2, 16);\r\n    }\r\n    trial.getColorNum = getColorNum;\r\n\r\n    // Class for visual and audio stimuli\r\n    class psychophysics_stimulus {\r\n      [option: string]: any; // so any option can be assigned to stimulus classes\r\n\r\n      constructor(stim: Stimulus) {\r\n        Object.assign(this, stim);\r\n        const keys = Object.keys(this);\r\n        for (var i = 0; i < keys.length; i++) {\r\n          if (typeof this[keys[i]] === \"function\") {\r\n            // オブジェクト内のfunctionはここで指定する必要がある。そうしないとここで即時に実行されて、その結果が関数名に代入される\r\n            if (keys[i] === \"drawFunc\") continue;\r\n            if (keys[i] === \"change_attr\") continue;\r\n            if (keys[i] === \"mask_func\") continue;\r\n\r\n            this[keys[i]] = this[keys[i]].call();\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    class visual_stimulus extends psychophysics_stimulus {\r\n      constructor(stim: Stimulus) {\r\n        super(stim);\r\n\r\n        if (this.startX === \"center\") {\r\n          if (this.origin_center) {\r\n            this.startX = 0;\r\n          } else {\r\n            this.startX = centerX;\r\n          }\r\n        }\r\n        if (this.startY === \"center\") {\r\n          if (this.origin_center) {\r\n            this.startY = 0;\r\n          } else {\r\n            this.startY = centerY;\r\n          }\r\n        }\r\n        if (this.endX === \"center\") {\r\n          if (this.origin_center) {\r\n            this.endX = 0;\r\n          } else {\r\n            this.endX = centerX;\r\n          }\r\n        }\r\n        if (this.endY === \"center\") {\r\n          if (this.origin_center) {\r\n            this.endY = 0;\r\n          } else {\r\n            this.endY = centerY;\r\n          }\r\n        }\r\n\r\n        if (this.origin_center) {\r\n          this.startX = this.startX + centerX;\r\n          this.startY = this.startY + centerY;\r\n          if (this.endX !== null) this.endX = this.endX + centerX;\r\n          if (this.endY !== null) this.endY = this.endY + centerY;\r\n        }\r\n\r\n        if (typeof this.motion_start_time === \"undefined\")\r\n          this.motion_start_time = this.show_start_time; // Motion will start at the same time as it is displayed.\r\n        if (typeof this.motion_end_time === \"undefined\")\r\n          this.motion_end_time = null;\r\n        if (typeof this.motion_start_frame === \"undefined\")\r\n          this.motion_start_frame = this.show_start_frame; // Motion will start at the same frame as it is displayed.\r\n        if (typeof this.motion_end_frame === \"undefined\")\r\n          this.motion_end_frame = null;\r\n\r\n        if (trial.clear_canvas === false && this.show_end_time !== null)\r\n          alert(\r\n            \"You can not specify the show_end_time with the clear_canvas property.\"\r\n          );\r\n\r\n        // calculate the velocity (pix/sec) using the distance and the time.\r\n        // If the pix_sec is specified, the calc_pix_per_sec returns the intact pix_sec.\r\n        // If the pix_frame is specified, the calc_pix_per_sec returns an undefined.\r\n        this.horiz_pix_sec = this.calc_pix_per_sec(\"horiz\");\r\n        this.vert_pix_sec = this.calc_pix_per_sec(\"vert\");\r\n\r\n        // currentX/Y is changed per frame.\r\n        this.currentX = this.startX;\r\n        this.currentY = this.startY;\r\n      }\r\n\r\n      calc_pix_per_sec(direction) {\r\n        let pix_sec, pix_frame, startPos, endPos;\r\n        if (direction === \"horiz\") {\r\n          pix_sec = this.horiz_pix_sec;\r\n          pix_frame = this.horiz_pix_frame;\r\n          startPos = this.startX;\r\n          endPos = this.endX;\r\n        } else {\r\n          pix_sec = this.vert_pix_sec;\r\n          pix_frame = this.vert_pix_frame;\r\n          startPos = this.startY;\r\n          endPos = this.endY;\r\n        }\r\n        const motion_start_time = this.motion_start_time;\r\n        const motion_end_time = this.motion_end_time;\r\n        if (\r\n          (typeof pix_sec !== \"undefined\" ||\r\n            typeof pix_frame !== \"undefined\") &&\r\n          endPos !== null &&\r\n          motion_end_time !== null\r\n        ) {\r\n          alert(\r\n            \"You can not specify the speed, location, and time at the same time.\"\r\n          );\r\n          pix_sec = 0; // stop the motion\r\n        }\r\n\r\n        if (typeof pix_sec !== \"undefined\" || typeof pix_frame !== \"undefined\")\r\n          return pix_sec; // returns an 'undefined' when you specify the pix_frame.\r\n\r\n        // The velocity is not specified\r\n\r\n        if (endPos === null) return 0; // This is not motion.\r\n\r\n        if (startPos === endPos) return 0; // This is not motion.\r\n\r\n        // The distance is specified\r\n\r\n        if (motion_end_time === null) {\r\n          // Only the distance is known\r\n          alert(\r\n            \"Please specify the motion_end_time or the velocity when you use the endX/Y property.\"\r\n          );\r\n          return 0; // stop the motion\r\n        }\r\n\r\n        return (\r\n          (endPos - startPos) /\r\n          (motion_end_time / 1000 - motion_start_time / 1000)\r\n        );\r\n      }\r\n\r\n      calc_current_position(direction, elapsed) {\r\n        let pix_frame, pix_sec, current_pos, start_pos, end_pos;\r\n\r\n        if (direction === \"horiz\") {\r\n          pix_frame = this.horiz_pix_frame;\r\n          pix_sec = this.horiz_pix_sec;\r\n          current_pos = this.currentX;\r\n          start_pos = this.startX;\r\n          end_pos = this.endX;\r\n        } else {\r\n          pix_frame = this.vert_pix_frame;\r\n          pix_sec = this.vert_pix_sec;\r\n          current_pos = this.currentY;\r\n          start_pos = this.startY;\r\n          end_pos = this.endY;\r\n        }\r\n\r\n        const motion_start = this.is_frame\r\n          ? this.motion_start_frame\r\n          : this.motion_start_time;\r\n        const motion_end = this.is_frame\r\n          ? this.motion_end_frame\r\n          : this.motion_end_time;\r\n\r\n        if (elapsed < motion_start) return current_pos;\r\n        if (motion_end !== null && elapsed >= motion_end) return current_pos;\r\n\r\n        // Note that: You can not specify the speed, location, and time at the same time.\r\n\r\n        let ascending = true; // true = The object moves from left to right, or from up to down.\r\n\r\n        if (typeof pix_frame === \"undefined\") {\r\n          // In this case, pix_sec is defined.\r\n          if (pix_sec < 0) ascending = false;\r\n        } else {\r\n          if (pix_frame < 0) ascending = false;\r\n        }\r\n\r\n        if (\r\n          end_pos === null ||\r\n          (ascending && current_pos <= end_pos) ||\r\n          (!ascending && current_pos >= end_pos)\r\n        ) {\r\n          if (typeof pix_frame === \"undefined\") {\r\n            // In this case, pix_sec is defined.\r\n            return (\r\n              start_pos +\r\n              Math.round((pix_sec * (elapsed - motion_start)) / 1000)\r\n            ); // This should be calculated in seconds.\r\n          } else {\r\n            return current_pos + pix_frame;\r\n          }\r\n        } else {\r\n          return current_pos;\r\n        }\r\n      }\r\n\r\n      update_position(elapsed) {\r\n        this.currentX = this.calc_current_position(\"horiz\", elapsed);\r\n        this.currentY = this.calc_current_position(\"vert\", elapsed);\r\n      }\r\n    }\r\n\r\n    class image_stimulus extends visual_stimulus {\r\n      constructor(stim: Stimulus) {\r\n        super(stim);\r\n\r\n        if (typeof this.file === \"undefined\") {\r\n          alert(\"You have to specify the file property.\");\r\n          return;\r\n        }\r\n\r\n        this.img = new Image();\r\n        this.img.src = this.file;\r\n        this.img.onload = () => {\r\n          const tmpRatio = trial.pixi ? 1 : window.devicePixelRatio;\r\n\r\n          if (\r\n            typeof this.mask === \"undefined\" &&\r\n            typeof this.filter === \"undefined\"\r\n          ) {\r\n            if (trial.pixi) {\r\n              this.pixi_obj = PIXI.Sprite.from(this.file);\r\n\r\n              if (typeof this.pixi_mask !== \"undefined\") {\r\n                this.pixi_obj.mask = this.pixi_mask;\r\n              }\r\n              if (typeof this.pixi_filters !== \"undefined\") {\r\n                this.pixi_obj.filters = this.pixi_filters;\r\n              }\r\n\r\n              init_pixi_obj(this.pixi_obj);\r\n            }\r\n            this.prepared = true;\r\n            return;\r\n          }\r\n\r\n          // For masking and filtering, draw the image on another invisible canvas and get its pixel data using the getImageData function.\r\n          // Note that masking can only be applied to image files uploaded to a web server.\r\n\r\n          if (document.getElementById(\"invisible_canvas\") === null) {\r\n            const canvas_element = document.createElement(\"canvas\");\r\n            canvas_element.id = \"invisible_canvas\";\r\n            display_element.appendChild(canvas_element);\r\n            canvas_element.style.display = \"none\";\r\n          }\r\n\r\n          const invisible_canvas = document.getElementById(\r\n            \"invisible_canvas\"\r\n          ) as HTMLCanvasElement;\r\n          const canvas_info = set_canvas(\r\n            invisible_canvas,\r\n            tmpRatio,\r\n            this.img.width,\r\n            this.img.height\r\n          );\r\n          const invisible_ctx = canvas_info.ctx;\r\n          invisible_ctx.clearRect(\r\n            0,\r\n            0,\r\n            invisible_canvas.width,\r\n            invisible_canvas.height\r\n          );\r\n\r\n          if (typeof this.filter === \"undefined\") {\r\n            invisible_ctx.filter = \"none\";\r\n          } else {\r\n            invisible_ctx.filter = this.filter;\r\n          }\r\n\r\n          invisible_ctx.drawImage(\r\n            this.img,\r\n            0,\r\n            0,\r\n            this.img.width,\r\n            this.img.height\r\n          );\r\n          if (typeof this.mask === \"undefined\") {\r\n            // Filtering only\r\n            const invisible_img = invisible_ctx.getImageData(\r\n              0,\r\n              0,\r\n              this.img.width * tmpRatio,\r\n              this.img.height * tmpRatio\r\n            );\r\n            if (trial.pixi) {\r\n              const filtered_texture = PIXI.Texture.fromBuffer(\r\n                invisible_img.data,\r\n                invisible_img.width,\r\n                invisible_img.height\r\n              );\r\n              this.pixi_obj = new PIXI.Sprite(filtered_texture);\r\n              init_pixi_obj(this.pixi_obj);\r\n            } else {\r\n              this.masking_img = invisible_img;\r\n            }\r\n            this.prepared = true;\r\n            return;\r\n          }\r\n\r\n          if (this.mask === \"manual\") {\r\n            if (this.mask_func === null) {\r\n              alert(\r\n                \"You have to specify the mask_func when applying masking manually.\"\r\n              );\r\n              return;\r\n            }\r\n\r\n            const manual_img = this.mask_func(invisible_canvas);\r\n            if (trial.pixi) {\r\n              const manual_texture = PIXI.Texture.fromBuffer(\r\n                manual_img.data,\r\n                manual_img.width,\r\n                manual_img.height\r\n              );\r\n              this.pixi_obj = new PIXI.Sprite(manual_texture);\r\n              init_pixi_obj(this.pixi_obj);\r\n            } else {\r\n              this.masking_img = manual_img;\r\n            }\r\n            this.prepared = true;\r\n            return;\r\n          }\r\n\r\n          if (this.mask === \"gauss\") {\r\n            if (typeof this.width === \"undefined\") {\r\n              alert(\r\n                \"You have to specify the width property for the gaussian mask. For example, 200.\"\r\n              );\r\n              return;\r\n            }\r\n            const gauss_width = this.width * tmpRatio;\r\n\r\n            // Getting only the areas to be filtered, not the whole image.\r\n            const invisible_img = invisible_ctx.getImageData(\r\n              (this.img.width * tmpRatio) / 2 - gauss_width / 2,\r\n              (this.img.height * tmpRatio) / 2 - gauss_width / 2,\r\n              gauss_width,\r\n              gauss_width\r\n            );\r\n\r\n            let coord_array = getNumbering(\r\n              Math.round(0 - gauss_width / 2),\r\n              gauss_width\r\n            );\r\n            let coord_matrix_x = [];\r\n            for (let i = 0; i < gauss_width; i++) {\r\n              coord_matrix_x.push(coord_array);\r\n            }\r\n\r\n            coord_array = getNumbering(\r\n              Math.round(0 - gauss_width / 2),\r\n              gauss_width\r\n            );\r\n            let coord_matrix_y = [];\r\n            for (let i = 0; i < gauss_width; i++) {\r\n              coord_matrix_y.push(coord_array);\r\n            }\r\n\r\n            let exp_value;\r\n            const adjusted_sc = this.sc * tmpRatio;\r\n            if (this.method === \"math\") {\r\n              alert(\"The math method is not supported. Please use the ml-matrix method instead.\")\r\n            } else if (this.method === \"numeric\") {\r\n              alert(\"The numeric method is not supported. Please use the ml-matrix method instead.\")\r\n            }\r\n            if (this.method === \"ml-matrix\") {\r\n              const matrix_x = new Matrix(coord_matrix_x);\r\n              const matrix_y = new Matrix(coord_matrix_y).transpose();\r\n\r\n              const x_factor = Matrix.pow(matrix_x, 2).mul(-1);\r\n              const y_factor = Matrix.pow(matrix_y, 2).mul(-1);\r\n\r\n              const varScale = 2 * Math.pow(adjusted_sc, 2);\r\n              exp_value = Matrix.add(\r\n                Matrix.divide(x_factor, varScale),\r\n                Matrix.divide(y_factor, varScale)\r\n              )\r\n                .exp()\r\n                .to2DArray();\r\n            }\r\n\r\n            let cnt = 3;\r\n            for (let i = 0; i < gauss_width; i++) {\r\n              for (let j = 0; j < gauss_width; j++) {\r\n                invisible_img.data[cnt] = exp_value[i][j] * 255; // 透明度を変更\r\n                cnt = cnt + 4;\r\n              }\r\n            }\r\n\r\n            if (trial.pixi) {\r\n              const gauss_texture = PIXI.Texture.fromBuffer(\r\n                invisible_img.data,\r\n                invisible_img.width,\r\n                invisible_img.height\r\n              );\r\n              this.pixi_obj = new PIXI.Sprite(gauss_texture);\r\n              init_pixi_obj(this.pixi_obj);\r\n            } else {\r\n              this.masking_img = invisible_img;\r\n            }\r\n            this.prepared = true;\r\n            return;\r\n          }\r\n\r\n          if (this.mask === \"circle\" || this.mask === \"rect\") {\r\n            if (typeof this.width === \"undefined\") {\r\n              alert(\r\n                \"You have to specify the width property for the circle/rect mask.\"\r\n              );\r\n              return;\r\n            }\r\n            if (typeof this.height === \"undefined\") {\r\n              alert(\r\n                \"You have to specify the height property for the circle/rect mask.\"\r\n              );\r\n              return;\r\n            }\r\n            if (typeof this.center_x === \"undefined\") {\r\n              alert(\r\n                \"You have to specify the center_x property for the circle/rect mask.\"\r\n              );\r\n              return;\r\n            }\r\n            if (typeof this.center_y === \"undefined\") {\r\n              alert(\r\n                \"You have to specify the center_y property for the circle/rect mask.\"\r\n              );\r\n              return;\r\n            }\r\n\r\n            const oval_width = this.width * tmpRatio;\r\n            const oval_height = this.height * tmpRatio;\r\n            // Note that the center of a circle or rectangle does not necessarily coincide with the center of the image.\r\n            const oval_cx = this.center_x * tmpRatio;\r\n            const oval_cy = this.center_y * tmpRatio;\r\n\r\n            // Getting only the areas to be filtered, not the whole image.\r\n            const invisible_img = invisible_ctx.getImageData(\r\n              oval_cx - oval_width / 2,\r\n              oval_cy - oval_height / 2,\r\n              oval_width,\r\n              oval_height\r\n            );\r\n            const cx = invisible_img.width / 2;\r\n            const cy = invisible_img.height / 2;\r\n\r\n            // When this.mask === 'rect', the alpha (transparency) value does not chage at all.\r\n            if (this.mask === \"circle\") {\r\n              let cnt = 3;\r\n              for (let j = 0; j < oval_height; j++) {\r\n                for (let i = 0; i < oval_width; i++) {\r\n                  const tmp =\r\n                    Math.pow(i - cx, 2) / Math.pow(cx, 2) +\r\n                    Math.pow(j - cy, 2) / Math.pow(cy, 2);\r\n                  if (tmp > 1) {\r\n                    invisible_img.data[cnt] = 0; // invisible\r\n                  }\r\n                  cnt = cnt + 4;\r\n                }\r\n              }\r\n            }\r\n\r\n            if (trial.pixi) {\r\n              const cropped_texture = PIXI.Texture.fromBuffer(\r\n                invisible_img.data,\r\n                invisible_img.width,\r\n                invisible_img.height\r\n              );\r\n              this.pixi_obj = new PIXI.Sprite(cropped_texture);\r\n              init_pixi_obj(this.pixi_obj);\r\n            } else {\r\n              this.masking_img = invisible_img;\r\n            }\r\n            this.prepared = true;\r\n            return;\r\n          }\r\n        };\r\n      }\r\n\r\n      show() {\r\n        if (trial.pixi) {\r\n          if (\r\n            typeof this.scale !== \"undefined\" &&\r\n            typeof this.image_width !== \"undefined\"\r\n          ) {\r\n            alert(\r\n              \"You can not specify the scale and image_width at the same time.\"\r\n            );\r\n          }\r\n          if (\r\n            typeof this.scale !== \"undefined\" &&\r\n            typeof this.image_height !== \"undefined\"\r\n          ) {\r\n            alert(\r\n              \"You can not specify the scale and image_height at the same time.\"\r\n            );\r\n          }\r\n          if (\r\n            typeof this.image_height !== \"undefined\" &&\r\n            typeof this.image_width !== \"undefined\"\r\n          ) {\r\n            alert(\r\n              \"You can not specify the image_height and image_width at the same time.\"\r\n            );\r\n          }\r\n\r\n          let scale = 1;\r\n\r\n          if (typeof this.scale !== \"undefined\") {\r\n            scale = this.scale;\r\n          }\r\n          if (typeof this.image_width !== \"undefined\") {\r\n            scale = this.image_width / this.img.width;\r\n          }\r\n          if (typeof this.image_height !== \"undefined\") {\r\n            scale = this.image_height / this.img.height;\r\n          }\r\n\r\n          this.pixi_obj.scale.x = scale;\r\n          this.pixi_obj.scale.y = scale;\r\n\r\n          if (typeof this.pixi_angle !== \"undefined\") {\r\n            this.pixi_obj.angle = this.pixi_angle;\r\n          }\r\n          if (typeof this.pixi_rotation !== \"undefined\") {\r\n            this.pixi_obj.rotation = this.pixi_rotation;\r\n          }\r\n\r\n          this.pixi_obj.x = this.currentX;\r\n          this.pixi_obj.y = this.currentY;\r\n          this.pixi_obj.visible = true;\r\n        } else {\r\n          if (this.mask || this.filter) {\r\n            // Note that filtering is done to the invisible_ctx.\r\n            ctx.putImageData(\r\n              this.masking_img,\r\n              this.currentX * window.devicePixelRatio -\r\n                this.masking_img.width / 2,\r\n              this.currentY * window.devicePixelRatio -\r\n                this.masking_img.height / 2\r\n            );\r\n          } else {\r\n            if (\r\n              typeof this.scale !== \"undefined\" &&\r\n              typeof this.image_width !== \"undefined\"\r\n            )\r\n              alert(\r\n                \"You can not specify the scale and image_width at the same time.\"\r\n              );\r\n            if (\r\n              typeof this.scale !== \"undefined\" &&\r\n              typeof this.image_height !== \"undefined\"\r\n            )\r\n              alert(\r\n                \"You can not specify the scale and image_height at the same time.\"\r\n              );\r\n            if (\r\n              typeof this.image_height !== \"undefined\" &&\r\n              typeof this.image_width !== \"undefined\"\r\n            )\r\n              alert(\r\n                \"You can not specify the image_height and image_width at the same time.\"\r\n              );\r\n\r\n            let scale = 1;\r\n\r\n            if (typeof this.scale !== \"undefined\") scale = this.scale;\r\n            if (typeof this.image_width !== \"undefined\")\r\n              scale = this.image_width / this.img.width;\r\n            if (typeof this.image_height !== \"undefined\")\r\n              scale = this.image_height / this.img.height;\r\n\r\n            const tmpW = this.img.width * scale;\r\n            const tmpH = this.img.height * scale;\r\n            ctx.drawImage(\r\n              this.img,\r\n              0,\r\n              0,\r\n              this.img.width,\r\n              this.img.height,\r\n              this.currentX - tmpW / 2,\r\n              this.currentY - tmpH / 2,\r\n              tmpW,\r\n              tmpH\r\n            );\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    class gabor_stimulus extends visual_stimulus {\r\n      constructor(stim: Stimulus) {\r\n        super(stim);\r\n\r\n        if (!trial.pixi) {\r\n          this.update_count = 0;\r\n          this.prepared = true;\r\n          return;\r\n        }\r\n\r\n        const fragmentSrc = `\r\n            precision mediump float;\r\n\r\n            uniform float Contrast;\r\n            uniform float Phase;\r\n            uniform float angle_in_degrees; // tilt\r\n            uniform float spatial_freq;\r\n            uniform float SpaceConstant;\r\n            uniform float disableNorm;\r\n            uniform float disableGauss;\r\n            uniform float modulateColor_R;\r\n            uniform float modulateColor_G;\r\n            uniform float modulateColor_B;\r\n            uniform float modulateColor_Alpha;\r\n            uniform float offset_R;\r\n            uniform float offset_G;\r\n            uniform float offset_B;\r\n            uniform float offset_Alpha;\r\n            uniform float centerX;\r\n            uniform float centerY;\r\n            uniform float contrastPreMultiplicator;\r\n            uniform float min_validModulationRange;\r\n            uniform float max_validModulationRange;\r\n\r\n            void main() {\r\n                const float twopi     = 2.0 * 3.141592654;\r\n                const float sqrtof2pi = 2.5066282746;\r\n                /* Conversion factor from degrees to radians: */\r\n                const float deg2rad = 3.141592654 / 180.0;\r\n                \r\n                float Angle = deg2rad * angle_in_degrees;\r\n                float FreqTwoPi = spatial_freq * twopi;\r\n                float Expmultiplier = -0.5 / (SpaceConstant * SpaceConstant);\r\n                float mc = disableNorm + (1.0 - disableNorm) * (1.0 / (sqrtof2pi * SpaceConstant));\r\n\r\n                vec3 modulateColor = vec3(modulateColor_R, modulateColor_G, modulateColor_B);\r\n\r\n                vec3 baseColor = modulateColor * mc * Contrast * contrastPreMultiplicator;\r\n\r\n                vec2 pos = gl_FragCoord.xy - vec2(centerX, centerY);\r\n\r\n                /* Compute (x,y) distance weighting coefficients, based on rotation angle: */\r\n                vec2 coeff = vec2(cos(Angle), sin(Angle)) * FreqTwoPi;\r\n\r\n                /* Evaluate sine grating at requested position, angle and phase: */\r\n                float sv = sin(dot(coeff, pos) + Phase);\r\n\r\n                /* Compute exponential hull for the gabor: */\r\n                float ev = disableGauss + (1.0 - disableGauss) * exp(dot(pos, pos) * Expmultiplier);\r\n\r\n                /* Multiply/Modulate base color and alpha with calculated sine/gauss      */\r\n                /* values, add some constant color/alpha Offset, assign as final fragment */\r\n                /* output color: */\r\n\r\n                vec4  Offset = vec4(offset_R, offset_G, offset_B, offset_Alpha);\r\n                        \r\n                // Be careful not to change the transparency. Note that the type of the baseColor valuable is vec3 not vec4.\r\n                gl_FragColor = vec4(baseColor * clamp(ev * sv, min_validModulationRange, max_validModulationRange), modulateColor_Alpha) + Offset;\r\n\r\n          }`;\r\n\r\n        // const gabor_width = this.width * window.devicePixelRatio; // No need to consider the devicePixelRatio property.\r\n        const gabor_width = this.width;\r\n        // create a null image element\r\n        const img_element = document.createElement(\"img\");\r\n        img_element.width = gabor_width;\r\n        img_element.height = gabor_width;\r\n        const gabor_sprite = PIXI.Sprite.from(img_element);\r\n        gabor_sprite.visible = false;\r\n\r\n        // center the sprite's anchor point\r\n        gabor_sprite.anchor.set(0.5);\r\n        gabor_sprite.x = pixi_app.screen.width / 2;\r\n        gabor_sprite.y = pixi_app.screen.height / 2;\r\n\r\n        const uniforms = {\r\n          Contrast: this.contrast,\r\n          Phase: this.phase,\r\n          angle_in_degrees: 90 + this.tilt, // Add 90 degrees for compatibility with previous versions.\r\n          spatial_freq: this.sf,\r\n          SpaceConstant: this.sc,\r\n          disableNorm: this.disableNorm ? 1 : 0,\r\n          disableGauss: this.disableGauss ? 1 : 0,\r\n          modulateColor_R: this.modulate_color[0],\r\n          modulateColor_G: this.modulate_color[1],\r\n          modulateColor_B: this.modulate_color[2],\r\n          modulateColor_Alpha: this.modulate_color[3],\r\n          offset_R: this.offset_color[0],\r\n          offset_G: this.offset_color[1],\r\n          offset_B: this.offset_color[2],\r\n          offset_Alpha: this.offset_color[3],\r\n          centerX: pixi_app.screen.width / 2,\r\n          centerY: pixi_app.screen.height / 2,\r\n          contrastPreMultiplicator: this.contrastPreMultiplicator,\r\n          min_validModulationRange: -2,\r\n          max_validModulationRange: 2,\r\n        };\r\n        const myFilter = new PIXI.Filter(null, fragmentSrc, uniforms);\r\n\r\n        pixi_app.stage.addChild(gabor_sprite);\r\n\r\n        gabor_sprite.filters = [myFilter];\r\n        this.pixi_obj = gabor_sprite;\r\n        this.prepared = true;\r\n      }\r\n\r\n      show() {\r\n        if (trial.pixi) {\r\n          this.pixi_obj.filters[0].uniforms.Phase += this.drift;\r\n          this.pixi_obj.x = this.currentX;\r\n          this.pixi_obj.y = this.currentY;\r\n          this.pixi_obj.filters[0].uniforms.centerX = this.currentX;\r\n          this.pixi_obj.filters[0].uniforms.centerY =\r\n            pixi_app.screen.height - this.currentY;\r\n          this.pixi_obj.visible = true;\r\n        } else {\r\n          ctx.putImageData(\r\n            this.img_data,\r\n            this.currentX * window.devicePixelRatio - this.img_data.width / 2,\r\n            this.currentY * window.devicePixelRatio - this.img_data.height / 2\r\n          );\r\n        }\r\n      }\r\n\r\n      update_position(elapsed) {\r\n        this.currentX = this.calc_current_position(\"horiz\", elapsed);\r\n        this.currentY = this.calc_current_position(\"vert\", elapsed);\r\n\r\n        if (trial.pixi) return;\r\n\r\n        if (typeof this.img_data !== \"undefined\" && this.drift === 0) return;\r\n\r\n        let gabor_data;\r\n        // console.log(this.method)\r\n\r\n        // The following calculation method is based on Psychtoolbox (MATLAB),\r\n        // although it doesn't use procedural texture mapping.\r\n        // I also have referenced the gaborgen-js code: https://github.com/jtth/gaborgen-js\r\n        // Note that \"Math\" and \"math\" are not the same.\r\n\r\n        const gabor_width = this.width * window.devicePixelRatio;\r\n        let coord_array = getNumbering(\r\n          Math.round(0 - gabor_width / 2),\r\n          gabor_width\r\n        );\r\n        let coord_matrix_x = [];\r\n        for (let i = 0; i < gabor_width; i++) {\r\n          coord_matrix_x.push(coord_array);\r\n        }\r\n\r\n        coord_array = getNumbering(\r\n          Math.round(0 - gabor_width / 2),\r\n          gabor_width\r\n        );\r\n        let coord_matrix_y = [];\r\n        for (let i = 0; i < gabor_width; i++) {\r\n          coord_matrix_y.push(coord_array);\r\n        }\r\n\r\n        const tilt_rad = deg2rad(90 - this.tilt);\r\n\r\n        // These values are scalars.\r\n        const a =\r\n          ((Math.cos(tilt_rad) * this.sf) / window.devicePixelRatio) *\r\n          (2 * Math.PI); // radians\r\n        const b =\r\n          ((Math.sin(tilt_rad) * this.sf) / window.devicePixelRatio) *\r\n          (2 * Math.PI);\r\n        const adjusted_sc = this.sc * window.devicePixelRatio;\r\n        let multConst = 1 / (Math.sqrt(2 * Math.PI) * adjusted_sc);\r\n        if (this.disableNorm) multConst = 1;\r\n\r\n        // const phase_rad = deg2rad(this.phase)\r\n        const phase_rad = deg2rad(this.phase + this.drift * this.update_count);\r\n        this.update_count += 1;\r\n\r\n        if (this.method === \"math\") {\r\n          alert(\"The math method is not supported. Please use the ml-matrix method instead.\")\r\n        } else if (this.method === \"numeric\") {\r\n          alert(\"The numeric method is not supported. Please use the ml-matrix method instead.\")\r\n        }\r\n        if (this.method === \"ml-matrix\") {\r\n          const matrix_x = new Matrix(coord_matrix_x);\r\n          const matrix_y = new Matrix(coord_matrix_y).transpose();\r\n          const x_factor = Matrix.pow(matrix_x, 2).mul(-1);\r\n          const y_factor = Matrix.pow(matrix_y, 2).mul(-1);\r\n          const sinWave = Matrix.add(\r\n            Matrix.multiply(matrix_x, a),\r\n            Matrix.multiply(matrix_y, b)\r\n          )\r\n            .add(phase_rad)\r\n            .sin(); // radians\r\n\r\n          const varScale = 2 * Math.pow(adjusted_sc, 2);\r\n          const exp_value = this.disableGauss\r\n            ? 1\r\n            : Matrix.add(\r\n                Matrix.divide(x_factor, varScale),\r\n                Matrix.divide(y_factor, varScale)\r\n              ).exp();\r\n\r\n          const tmp1 = Matrix.multiply(sinWave, exp_value);\r\n          const tmp2 = Matrix.multiply(tmp1, multConst);\r\n          const tmp3 = Matrix.multiply(\r\n            Matrix.multiply(tmp2, this.contrastPreMultiplicator),\r\n            this.contrast\r\n          );\r\n          const m = Matrix.multiply(Matrix.add(tmp3, 0.5), 256);\r\n          gabor_data = m.to2DArray();\r\n        } \r\n        // console.log(gabor_data)\r\n        const imageData = ctx.createImageData(gabor_width, gabor_width);\r\n        let cnt = 0;\r\n        // Iterate through every pixel\r\n        for (let i = 0; i < gabor_width; i++) {\r\n          for (let j = 0; j < gabor_width; j++) {\r\n            // Modify pixel data\r\n            imageData.data[cnt] = Math.round(gabor_data[i][j]); // R value\r\n            cnt++;\r\n            imageData.data[cnt] = Math.round(gabor_data[i][j]); // G\r\n            cnt++;\r\n            imageData.data[cnt] = Math.round(gabor_data[i][j]); // B\r\n            cnt++;\r\n            imageData.data[cnt] = 255; // alpha\r\n            cnt++;\r\n          }\r\n        }\r\n\r\n        this.img_data = imageData;\r\n      }\r\n    }\r\n\r\n    class line_stimulus extends visual_stimulus {\r\n      constructor(stim: Stimulus) {\r\n        super(stim);\r\n\r\n        if (typeof this.angle === \"undefined\") {\r\n          if (\r\n            typeof this.x1 === \"undefined\" ||\r\n            typeof this.x2 === \"undefined\" ||\r\n            typeof this.y1 === \"undefined\" ||\r\n            typeof this.y2 === \"undefined\"\r\n          ) {\r\n            alert(\r\n              \"You have to specify the angle of lines, or the start (x1, y1) and end (x2, y2) coordinates.\"\r\n            );\r\n            return;\r\n          }\r\n          // The start (x1, y1) and end (x2, y2) coordinates are defined.\r\n          // For motion, startX/Y must be calculated.\r\n          this.startX = (this.x1 + this.x2) / 2;\r\n          this.startY = (this.y1 + this.y2) / 2;\r\n          if (this.origin_center) {\r\n            this.startX = this.startX + centerX;\r\n            this.startY = this.startY + centerY;\r\n          }\r\n          this.currentX = this.startX;\r\n          this.currentY = this.startY;\r\n          this.angle =\r\n            Math.atan((this.y2 - this.y1) / (this.x2 - this.x1)) *\r\n            (180 / Math.PI);\r\n          this.line_length = Math.sqrt(\r\n            (this.x2 - this.x1) ** 2 + (this.y2 - this.y1) ** 2\r\n          );\r\n        } else {\r\n          if (\r\n            typeof this.x1 !== \"undefined\" ||\r\n            typeof this.x2 !== \"undefined\" ||\r\n            typeof this.y1 !== \"undefined\" ||\r\n            typeof this.y2 !== \"undefined\"\r\n          )\r\n            alert(\r\n              \"You can not specify the angle and positions of the line at the same time.\"\r\n            );\r\n          if (typeof this.line_length === \"undefined\")\r\n            alert(\"You have to specify the line_length property.\");\r\n        }\r\n        if (typeof this.line_color === \"undefined\") this.line_color = \"black\";\r\n\r\n        if (trial.pixi) {\r\n          this.pixi_obj = new PIXI.Graphics();\r\n\r\n          this.pixi_obj.lineStyle({\r\n            width: this.line_width,\r\n            color: getColorNum(this.line_color),\r\n            join: this.lineJoin,\r\n            miterLimit: this.miterLimit,\r\n          });\r\n\r\n          const theta = deg2rad(this.angle);\r\n          const x1 = (-this.line_length / 2) * Math.cos(theta);\r\n          const y1 = (-this.line_length / 2) * Math.sin(theta);\r\n          const x2 = (this.line_length / 2) * Math.cos(theta);\r\n          const y2 = (this.line_length / 2) * Math.sin(theta);\r\n          this.pixi_obj.moveTo(x1, y1);\r\n          this.pixi_obj.lineTo(x2, y2);\r\n\r\n          this.pixi_obj.visible = false;\r\n          pixi_app.stage.addChild(this.pixi_obj);\r\n        }\r\n\r\n        this.prepared = true;\r\n      }\r\n\r\n      show() {\r\n        if (trial.pixi) {\r\n          this.pixi_obj.x = this.currentX;\r\n          this.pixi_obj.y = this.currentY;\r\n          this.pixi_obj.visible = true;\r\n        } else {\r\n          if (typeof this.filter === \"undefined\") {\r\n            ctx.filter = \"none\";\r\n          } else {\r\n            ctx.filter = this.filter;\r\n          }\r\n\r\n          // common\r\n          ctx.beginPath();\r\n          ctx.lineWidth = this.line_width;\r\n          ctx.lineJoin = this.lineJoin;\r\n          ctx.miterLimit = this.miterLimit;\r\n          //\r\n          const theta = deg2rad(this.angle);\r\n          const x1 = this.currentX - (this.line_length / 2) * Math.cos(theta);\r\n          const y1 = this.currentY - (this.line_length / 2) * Math.sin(theta);\r\n          const x2 = this.currentX + (this.line_length / 2) * Math.cos(theta);\r\n          const y2 = this.currentY + (this.line_length / 2) * Math.sin(theta);\r\n          ctx.strokeStyle = this.line_color;\r\n          ctx.moveTo(x1, y1);\r\n          ctx.lineTo(x2, y2);\r\n          ctx.stroke();\r\n        }\r\n      }\r\n    }\r\n\r\n    class rect_stimulus extends visual_stimulus {\r\n      constructor(stim: Stimulus) {\r\n        super(stim);\r\n\r\n        if (typeof this.width === \"undefined\")\r\n          alert(\"You have to specify the width of the rectangle.\");\r\n        if (typeof this.height === \"undefined\")\r\n          alert(\"You have to specify the height of the rectangle.\");\r\n        if (\r\n          typeof this.line_color === \"undefined\" &&\r\n          typeof this.fill_color === \"undefined\"\r\n        )\r\n          alert(\r\n            \"You have to specify the either of the line_color or fill_color property.\"\r\n          );\r\n\r\n        if (trial.pixi) {\r\n          this.pixi_obj = new PIXI.Graphics();\r\n\r\n          this.pixi_obj.lineStyle({\r\n            width: this.line_width,\r\n            color: getColorNum(this.line_color),\r\n            join: this.lineJoin,\r\n            miterLimit: this.miterLimit,\r\n          });\r\n\r\n          if (typeof this.fill_color !== \"undefined\")\r\n            this.pixi_obj.beginFill(getColorNum(this.fill_color), 1);\r\n          this.pixi_obj.drawRect(\r\n            -this.width / 2,\r\n            -this.height / 2,\r\n            this.width,\r\n            this.height\r\n          );\r\n          if (typeof this.fill_color !== \"undefined\") this.pixi_obj.endFill();\r\n\r\n          this.pixi_obj.visible = false;\r\n          pixi_app.stage.addChild(this.pixi_obj);\r\n        }\r\n        this.prepared = true;\r\n      }\r\n\r\n      show() {\r\n        if (trial.pixi) {\r\n          this.pixi_obj.x = this.currentX;\r\n          this.pixi_obj.y = this.currentY;\r\n          this.pixi_obj.visible = true;\r\n        } else {\r\n          if (typeof this.filter === \"undefined\") {\r\n            ctx.filter = \"none\";\r\n          } else {\r\n            ctx.filter = this.filter;\r\n          }\r\n\r\n          // common\r\n          // ctx.beginPath();\r\n          ctx.lineWidth = this.line_width;\r\n          ctx.lineJoin = this.lineJoin;\r\n          ctx.miterLimit = this.miterLimit;\r\n          //\r\n          // First, draw a filled rectangle, then an edge.\r\n          if (typeof this.fill_color !== \"undefined\") {\r\n            ctx.fillStyle = this.fill_color;\r\n            ctx.fillRect(\r\n              this.currentX - this.width / 2,\r\n              this.currentY - this.height / 2,\r\n              this.width,\r\n              this.height\r\n            );\r\n          }\r\n          if (typeof this.line_color !== \"undefined\") {\r\n            ctx.strokeStyle = this.line_color;\r\n            ctx.strokeRect(\r\n              this.currentX - this.width / 2,\r\n              this.currentY - this.height / 2,\r\n              this.width,\r\n              this.height\r\n            );\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    class cross_stimulus extends visual_stimulus {\r\n      constructor(stim: Stimulus) {\r\n        super(stim);\r\n\r\n        if (typeof this.line_length === \"undefined\")\r\n          alert(\"You have to specify the line_length of the fixation cross.\");\r\n        if (typeof this.line_color === \"undefined\") this.line_color = \"#000000\";\r\n\r\n        if (trial.pixi) {\r\n          this.pixi_obj = new PIXI.Graphics();\r\n\r\n          this.pixi_obj.lineStyle({\r\n            width: this.line_width,\r\n            color: getColorNum(this.line_color),\r\n            join: this.lineJoin,\r\n            miterLimit: this.miterLimit,\r\n          });\r\n\r\n          const x1 = -this.line_length / 2;\r\n          const y1 = 0;\r\n          const x2 = this.line_length / 2;\r\n          const y2 = 0;\r\n          this.pixi_obj.moveTo(x1, y1);\r\n          this.pixi_obj.lineTo(x2, y2);\r\n\r\n          const x3 = 0;\r\n          const y3 = -this.line_length / 2;\r\n          const x4 = 0;\r\n          const y4 = this.line_length / 2;\r\n          this.pixi_obj.moveTo(x3, y3);\r\n          this.pixi_obj.lineTo(x4, y4);\r\n\r\n          this.pixi_obj.visible = false;\r\n          pixi_app.stage.addChild(this.pixi_obj);\r\n        }\r\n\r\n        this.prepared = true;\r\n      }\r\n\r\n      show() {\r\n        if (trial.pixi) {\r\n          this.pixi_obj.x = this.currentX;\r\n          this.pixi_obj.y = this.currentY;\r\n          this.pixi_obj.visible = true;\r\n        } else {\r\n          if (typeof this.filter === \"undefined\") {\r\n            ctx.filter = \"none\";\r\n          } else {\r\n            ctx.filter = this.filter;\r\n          }\r\n\r\n          // common\r\n          ctx.beginPath();\r\n          ctx.lineWidth = this.line_width;\r\n          ctx.lineJoin = this.lineJoin;\r\n          ctx.miterLimit = this.miterLimit;\r\n          //\r\n          ctx.strokeStyle = this.line_color;\r\n          const x1 = this.currentX;\r\n          const y1 = this.currentY - this.line_length / 2;\r\n          const x2 = this.currentX;\r\n          const y2 = this.currentY + this.line_length / 2;\r\n          ctx.moveTo(x1, y1);\r\n          ctx.lineTo(x2, y2);\r\n          const x3 = this.currentX - this.line_length / 2;\r\n          const y3 = this.currentY;\r\n          const x4 = this.currentX + this.line_length / 2;\r\n          const y4 = this.currentY;\r\n          ctx.moveTo(x3, y3);\r\n          ctx.lineTo(x4, y4);\r\n          // ctx.closePath();\r\n          ctx.stroke();\r\n        }\r\n      }\r\n    }\r\n\r\n    class circle_stimulus extends visual_stimulus {\r\n      constructor(stim: Stimulus) {\r\n        super(stim);\r\n\r\n        if (typeof this.radius === \"undefined\")\r\n          alert(\"You have to specify the radius of circles.\");\r\n        if (\r\n          typeof this.line_color === \"undefined\" &&\r\n          typeof this.fill_color === \"undefined\"\r\n        )\r\n          alert(\"You have to specify the either of line_color or fill_color.\");\r\n\r\n        if (!trial.pixi) {\r\n          this.prepared = true;\r\n          return;\r\n        }\r\n\r\n        this.pixi_obj = new PIXI.Graphics();\r\n        // this.pixi_obj.cacheAsBitmap = true;\r\n\r\n        this.pixi_obj.lineStyle({\r\n          width: this.line_width,\r\n          color: getColorNum(this.line_color),\r\n          join: this.lineJoin,\r\n          miterLimit: this.miterLimit,\r\n        });\r\n\r\n        if (typeof this.fill_color !== \"undefined\")\r\n          this.pixi_obj.beginFill(getColorNum(this.fill_color), 1);\r\n        this.pixi_obj.drawCircle(0, 0, this.radius);\r\n        if (typeof this.fill_color !== \"undefined\") this.pixi_obj.endFill();\r\n\r\n        this.pixi_obj.visible = false;\r\n        pixi_app.stage.addChild(this.pixi_obj);\r\n        this.prepared = true;\r\n      }\r\n\r\n      show() {\r\n        if (trial.pixi) {\r\n          this.pixi_obj.x = this.currentX;\r\n          this.pixi_obj.y = this.currentY;\r\n          this.pixi_obj.visible = true;\r\n        } else {\r\n          if (typeof this.filter === \"undefined\") {\r\n            ctx.filter = \"none\";\r\n          } else {\r\n            ctx.filter = this.filter;\r\n          }\r\n\r\n          // common\r\n          ctx.beginPath();\r\n          ctx.lineWidth = this.line_width;\r\n          ctx.lineJoin = this.lineJoin;\r\n          ctx.miterLimit = this.miterLimit;\r\n          //\r\n          if (typeof this.fill_color !== \"undefined\") {\r\n            ctx.fillStyle = this.fill_color;\r\n            ctx.arc(\r\n              this.currentX,\r\n              this.currentY,\r\n              this.radius,\r\n              0,\r\n              Math.PI * 2,\r\n              false\r\n            );\r\n            ctx.fill();\r\n          }\r\n          if (typeof this.line_color !== \"undefined\") {\r\n            ctx.strokeStyle = this.line_color;\r\n            ctx.arc(\r\n              this.currentX,\r\n              this.currentY,\r\n              this.radius,\r\n              0,\r\n              Math.PI * 2,\r\n              false\r\n            );\r\n            ctx.stroke();\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    class text_stimulus extends visual_stimulus {\r\n      constructor(stim: Stimulus) {\r\n        super(stim);\r\n\r\n        if (typeof this.content === \"undefined\")\r\n          alert(\"You have to specify the content of texts.\");\r\n\r\n        if (trial.pixi) {\r\n          if (typeof this.text_space !== \"undefined\")\r\n            alert(`You can't specify the text_space in Pixi mode.`);\r\n          this.pixi_obj = new PIXI.Text(this.content);\r\n          init_pixi_obj(this.pixi_obj);\r\n          this.pixi_obj.style.align = \"center\";\r\n          this.pixi_obj.style.fontFamily = this.fontFamily;\r\n          this.pixi_obj.style.fontSize = this.fontSize;\r\n          this.pixi_obj.style.fontStyle = this.fontStyle;\r\n          this.pixi_obj.style.fontWeight = this.fontWeight;\r\n          this.pixi_obj.style.fill = this.text_color;\r\n          this.pixi_obj.style.lineJoin = this.lineJoin;\r\n          this.pixi_obj.style.miterLimit = this.miterLimit;\r\n\r\n          if (typeof this.pixi_angle !== \"undefined\") {\r\n            this.pixi_obj.angle = this.pixi_angle;\r\n          }\r\n          if (typeof this.pixi_rotation !== \"undefined\") {\r\n            this.pixi_obj.rotation = this.pixi_rotation;\r\n          }\r\n\r\n        } else {\r\n          if (typeof this.text_space === \"undefined\") this.text_space = 20;\r\n          let font_info = \"\";\r\n          // Note the order specified.\r\n          font_info = font_info + \" \" + this.fontStyle;\r\n          font_info = font_info + \" \" + this.fontWeight;\r\n          font_info = font_info + \" \" + this.fontSize;\r\n          font_info = font_info + \" \" + this.fontFamily;\r\n          if (typeof this.font === \"undefined\") this.font = font_info;\r\n        }\r\n        this.prepared = true;\r\n      }\r\n\r\n      show() {\r\n        if (trial.pixi) {\r\n          this.pixi_obj.x = this.currentX;\r\n          this.pixi_obj.y = this.currentY;\r\n          this.pixi_obj.visible = true;\r\n        } else {\r\n          if (typeof this.filter === \"undefined\") {\r\n            ctx.filter = \"none\";\r\n          } else {\r\n            ctx.filter = this.filter;\r\n          }\r\n\r\n          // common\r\n          // ctx.beginPath();\r\n          ctx.lineWidth = this.line_width;\r\n          ctx.lineJoin = this.lineJoin;\r\n          ctx.miterLimit = this.miterLimit;\r\n          ctx.font = this.font;\r\n          ctx.textAlign = \"center\";\r\n          ctx.textBaseline = \"middle\";\r\n\r\n          let column = [\"\"];\r\n          let line = 0;\r\n          for (let i = 0; i < this.content.length; i++) {\r\n            let char = this.content.charAt(i);\r\n\r\n            if (char == \"\\n\") {\r\n              line++;\r\n              column[line] = \"\";\r\n            } else {\r\n              column[line] += char;\r\n            }\r\n          }\r\n\r\n          let draw_stroke =\r\n            ((typeof this.stroke_color !== 'undefined') ||\r\n            (typeof this.stroke_weight !== 'undefined' && this.stroke_weight > 0));\r\n\r\n          for (let i = 0; i < column.length; i++) {\r\n            ctx.fillStyle = this.text_color;\r\n            ctx.fillText(\r\n              column[i],\r\n              this.currentX,\r\n              this.currentY -\r\n                (this.text_space * (column.length - 1)) / 2 +\r\n                this.text_space * i\r\n            );\r\n            if (draw_stroke) {\r\n              ctx.strokeStyle = this.stroke_color;\r\n              ctx.lineWidth = this.stroke_width;\r\n              ctx.strokeText(\r\n                column[i],\r\n                this.currentX,\r\n                this.currentY -\r\n                (this.text_space * (column.length - 1)) / 2 +\r\n                this.text_space * i\r\n              );\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    class manual_stimulus extends visual_stimulus {\r\n      constructor(stim: Stimulus) {\r\n        super(stim);\r\n        this.prepared = true;\r\n      }\r\n\r\n      show() {}\r\n    }\r\n\r\n    class pixi_stimulus extends visual_stimulus {\r\n      constructor(stim: Stimulus) {\r\n        super(stim);\r\n        if (!trial.pixi) {\r\n          alert(\r\n            \"To use Pixi objects, the pixi property of the psychophysics plugin must be set to true.\"\r\n          );\r\n          return;\r\n        }\r\n\r\n        this.pixi_obj.visible = false;\r\n        pixi_app.stage.addChild(this.pixi_obj);\r\n        this.prepared = true;\r\n      }\r\n\r\n      show() {\r\n        this.pixi_obj.x = this.currentX;\r\n        this.pixi_obj.y = this.currentY;\r\n        this.pixi_obj.visible = true;\r\n      }\r\n    }\r\n\r\n    function init_pixi_obj(obj) {\r\n      obj.anchor.set(0.5);\r\n      obj.visible = false;\r\n      pixi_app.stage.addChild(obj);\r\n    }\r\n\r\n    const jsPsych = this.jsPsych;\r\n    class audio_stimulus extends psychophysics_stimulus {\r\n      constructor(stim: Stimulus) {\r\n        super(stim);\r\n\r\n        if (typeof this.file === \"undefined\") {\r\n          alert(\"You have to specify the file property.\");\r\n          return;\r\n        }\r\n\r\n        // load audio file\r\n        // https://www.jspsych.org/latest/support/migration-v8/\r\n        jsPsych.pluginAPI\r\n          .getAudioPlayer(this.file)\r\n          .then((buffer) => {\r\n              this.audio = buffer;\r\n              this.prepared = true;\r\n              // console.log(\"New audio\");\r\n            })\r\n          .catch((err) => {\r\n              console.error(\r\n                `Failed to load audio file \"${this.file}\". Try checking the file path. We recommend using the preload plugin to load audio files.`\r\n              );\r\n              console.error(err);\r\n            }\r\n          );\r\n\r\n        // set up end event if trial needs it\r\n        if (this.trial_ends_after_audio) {\r\n          this.audio.addEventListener(\"ended\", end_trial);\r\n        }\r\n      }\r\n\r\n      play() {\r\n        // In the original jsPsych, when WebAudio is available, rt_method: \"audio\" is used. \r\n        // In the psychophysics plugin, since the start of the sound does not necessarily mean the start of the reaction time, \r\n        // performance.now() is used consistently.\"\r\n        this.audio.play();\r\n        // }\r\n      }\r\n\r\n      stop() {\r\n        this.audio.stop();\r\n        this.audio.removeEventListener(\"ended\", end_trial);\r\n      }\r\n    }\r\n\r\n    if (typeof trial.stepFunc !== \"undefined\")\r\n      alert(\r\n        `The stepFunc is no longer supported. Please use the raf_func instead.`\r\n      );\r\n\r\n    const elm_jspsych_content = document.getElementById(\"jspsych-content\");\r\n    const style_jspsych_content = window.getComputedStyle(elm_jspsych_content); // stock\r\n    const default_maxWidth = style_jspsych_content.maxWidth;\r\n    elm_jspsych_content.style.maxWidth = \"none\"; // The default value is '95%'. To fit the window.\r\n\r\n    if (trial.canvas_width === null)\r\n      trial.canvas_width = window.innerWidth - trial.canvas_offsetX;\r\n    if (trial.canvas_height === null)\r\n      trial.canvas_height = window.innerHeight - trial.canvas_offsetY;\r\n\r\n    let pixi_app;\r\n    let new_html = \"\";\r\n    const canvas_exist =\r\n      document.getElementById(\"myCanvas\") === null ? false : true;\r\n    if (!canvas_exist && trial.upper_prompt !== null) {\r\n        new_html += trial.upper_prompt;\r\n    }  \r\n    if (!canvas_exist) {\r\n      if (trial.pixi) {\r\n        pixi_app = new PIXI.Application({\r\n          width: trial.canvas_width,\r\n          height: trial.canvas_height,\r\n          backgroundColor: getColorNum(trial.background_color),\r\n          // antialias: true,\r\n          // resolution: window.devicePixelRatio || 1,\r\n        });\r\n\r\n        display_element.appendChild(pixi_app.view);\r\n      } else {\r\n        new_html +=\r\n          '<canvas id=\"myCanvas\" class=\"jspsych-canvas\" width=' +\r\n          trial.canvas_width +\r\n          \" height=\" +\r\n          trial.canvas_height +\r\n          ' style=\"background-color:' +\r\n          trial.background_color +\r\n          ';\"></canvas>';\r\n      }\r\n    }\r\n\r\n    const motion_rt_method = \"performance\"; // 'date' or 'performance'. 'performance' is better.\r\n    let start_time; // used for mouse and button responses.\r\n    let keyboardListener;\r\n    let response_flag = false;\r\n\r\n    // allow to respond using keyboard mouse or button\r\n    this.jsPsych.pluginAPI.setTimeout(() => {\r\n      response_flag = true; // allow to response\r\n      if (trial.response_type === \"key\") {\r\n        if (trial.choices != \"NO_KEYS\") {\r\n          keyboardListener = this.jsPsych.pluginAPI.getKeyboardResponse({\r\n            callback_function: after_response,\r\n            valid_responses: trial.choices,\r\n            rt_method: motion_rt_method,\r\n            persist: false,\r\n            allow_held_key: false,\r\n          });\r\n        }\r\n      } else if (trial.response_type === \"mouse\") {\r\n        start_time = performance.now();\r\n\r\n        canvas.addEventListener(\"mousedown\", mouseDownFunc);\r\n      } else {\r\n        // button\r\n        start_time = performance.now();\r\n      }\r\n    }, trial.response_start_time);\r\n\r\n\r\n    // add prompt\r\n    if (!canvas_exist && trial.prompt !== null) {\r\n      new_html += trial.prompt;\r\n    }\r\n    if (!canvas_exist && trial.lower_prompt !== null) {\r\n      new_html += trial.lower_prompt;\r\n    }\r\n    display_element.insertAdjacentHTML(\"beforeend\", new_html);\r\n\r\n    //display buttons\r\n    if (!canvas_exist && trial.response_type === \"button\") {\r\n      const buttonGroupElement = document.createElement(\"div\");\r\n      buttonGroupElement.id = \"jspsych-html-button-response-btngroup\";\r\n      if (trial.button_layout === \"grid\") {\r\n        buttonGroupElement.classList.add(\"jspsych-btn-group-grid\");\r\n        if (trial.grid_rows === null && trial.grid_columns === null) {\r\n          throw new Error(\r\n            \"You cannot set `grid_rows` to `null` without providing a value for `grid_columns`.\"\r\n          );\r\n        }\r\n        const n_cols =\r\n          trial.grid_columns === null\r\n            ? Math.ceil(trial.button_choices.length / trial.grid_rows)\r\n            : trial.grid_columns;\r\n        const n_rows =\r\n          trial.grid_rows === null\r\n            ? Math.ceil(trial.button_choices.length / trial.grid_columns)\r\n            : trial.grid_rows;\r\n        buttonGroupElement.style.gridTemplateColumns = `repeat(${n_cols}, 1fr)`;\r\n        buttonGroupElement.style.gridTemplateRows = `repeat(${n_rows}, 1fr)`;\r\n      } else if (trial.button_layout === \"flex\") {\r\n        buttonGroupElement.classList.add(\"jspsych-btn-group-flex\");\r\n      }\r\n  \r\n      for (const [choiceIndex, choice] of trial.button_choices.entries()) {\r\n        buttonGroupElement.insertAdjacentHTML(\"beforeend\", trial.button_html(choice, choiceIndex));\r\n        const buttonElement = buttonGroupElement.lastChild as HTMLElement;\r\n        buttonElement.dataset.choice = choiceIndex.toString();\r\n        buttonElement.addEventListener(\"click\", () => {\r\n          // after_response(choiceIndex);\r\n          after_response({\r\n            key: -1,\r\n            rt: performance.now() - start_time,\r\n            button: choiceIndex,\r\n          });\r\n\r\n        });\r\n      }\r\n  \r\n      display_element.appendChild(buttonGroupElement);\r\n\r\n    }\r\n    const canvas =\r\n      trial.pixi === true ? pixi_app.view : document.getElementById(\"myCanvas\");\r\n    if (!canvas || !canvas.getContext) {\r\n      alert(\"This browser does not support the canvas element.\");\r\n      return;\r\n    }\r\n\r\n    let centerX;\r\n    let centerY;\r\n    let ctx;\r\n\r\n    function set_canvas(canvas, ratio, width, height) {\r\n      const ctx = canvas.getContext(\"2d\");\r\n      const canvas_scale = ratio; // This will be 2 in a retina display, and 1.5 in a microsoft surface laptop.\r\n      canvas.style.width = width + \"px\";\r\n      canvas.style.height = height + \"px\";\r\n\r\n      if (!canvas_exist) {\r\n        canvas.width = width * canvas_scale;\r\n        canvas.height = height * canvas_scale;\r\n        ctx.scale(canvas_scale, canvas_scale);\r\n      }\r\n      const centerX = canvas.width / 2 / canvas_scale;\r\n      const centerY = canvas.height / 2 / canvas_scale;\r\n\r\n      return {\r\n        ctx,\r\n        centerX,\r\n        centerY,\r\n      };\r\n    }\r\n\r\n    if (trial.pixi) {\r\n      centerX = pixi_app.screen.width / 2;\r\n      centerY = pixi_app.screen.height / 2;\r\n    } else {\r\n      const canvas_info = set_canvas(\r\n        canvas,\r\n        window.devicePixelRatio,\r\n        trial.canvas_width,\r\n        trial.canvas_height\r\n      );\r\n      centerX = canvas_info.centerX;\r\n      centerY = canvas_info.centerY;\r\n      ctx = canvas_info.ctx;\r\n      trial.context = ctx;\r\n    }\r\n    trial.canvas = canvas;\r\n    trial.centerX = centerX;\r\n    trial.centerY = centerY;\r\n\r\n    // add event listeners defined by experimenters.\r\n    if (trial.mouse_down_func !== null) {\r\n      canvas.addEventListener(\"mousedown\", trial.mouse_down_func);\r\n    }\r\n\r\n    if (trial.mouse_move_func !== null) {\r\n      canvas.addEventListener(\"mousemove\", trial.mouse_move_func);\r\n    }\r\n\r\n    if (trial.mouse_up_func !== null) {\r\n      canvas.addEventListener(\"mouseup\", trial.mouse_up_func);\r\n    }\r\n\r\n    if (trial.key_down_func !== null) {\r\n      document.addEventListener(\"keydown\", trial.key_down_func); // It doesn't work if the canvas is specified instead of the document.\r\n    }\r\n\r\n    if (trial.key_up_func !== null) {\r\n      document.addEventListener(\"keyup\", trial.key_up_func);\r\n    }\r\n\r\n    // Touch functions are assigned to the CANVAS but not to the document.\r\n    if (trial.touchstart_func !== null) {\r\n      canvas.addEventListener(\"touchstart\", trial.touchstart_func);\r\n    }\r\n\r\n    if (trial.touchend_func !== null) {\r\n      canvas.addEventListener(\"touchend\", trial.touchend_func);\r\n    }\r\n\r\n    if (trial.touchcancel_func !== null) {\r\n      canvas.addEventListener(\"touchcancel\", trial.touchcancel_func);\r\n    }\r\n\r\n    if (trial.touchmove_func !== null) {\r\n      canvas.addEventListener(\"touchmove\", trial.touchmove_func);\r\n    }\r\n\r\n    if (typeof trial.stimuli === \"undefined\" && trial.raf_func === null) {\r\n      alert(\r\n        \"You have to specify the stimuli/raf_func parameter in the psychophysics plugin.\"\r\n      );\r\n      return;\r\n    }\r\n\r\n    /////////////////////////////////////////////////////////\r\n    // make instances\r\n    const set_instance = {\r\n      sound: audio_stimulus,\r\n      image: image_stimulus,\r\n      line: line_stimulus,\r\n      rect: rect_stimulus,\r\n      circle: circle_stimulus,\r\n      text: text_stimulus,\r\n      cross: cross_stimulus,\r\n      manual: manual_stimulus,\r\n      gabor: gabor_stimulus,\r\n      pixi: pixi_stimulus,\r\n    };\r\n    if (typeof trial.stimuli !== \"undefined\") {\r\n      // The stimuli could be 'undefined' if the raf_func is specified.\r\n      for (let i = 0; i < trial.stimuli.length; i++) {\r\n        const stim = trial.stimuli[i];\r\n        if (typeof stim.obj_type === \"undefined\") {\r\n          alert(\r\n            \"You have missed to specify the obj_type property in the \" +\r\n              (i + 1) +\r\n              \"th object.\"\r\n          );\r\n          return;\r\n        }\r\n        stim.instance = new set_instance[stim.obj_type](stim);\r\n      }\r\n    }\r\n\r\n    function mouseDownFunc(e) {\r\n      let click_time;\r\n      click_time = performance.now();\r\n      \r\n      e.preventDefault();\r\n\r\n      after_response({\r\n        key: -1,\r\n        rt: click_time - start_time,\r\n        // clickX: e.clientX,\r\n        // clickY: e.clientY,\r\n        clickX: e.offsetX,\r\n        clickY: e.offsetY,\r\n      });\r\n    }\r\n\r\n    let startStep = null;\r\n    let sumOfStep;\r\n    let elapsedTime;\r\n    let prepare_check = true;\r\n\r\n    function step(timestamp) {\r\n      // Wait until all the instance of stimuli are ready.\r\n      if (prepare_check) {\r\n        for (let i = 0; i < trial.stimuli.length; i++) {\r\n          if (!trial.stimuli[i].instance.prepared) {\r\n            frameRequestID = window.requestAnimationFrame(step);\r\n            return;\r\n          }\r\n        }\r\n      }\r\n      prepare_check = false;\r\n\r\n      if (!startStep) {\r\n        startStep = timestamp;\r\n        sumOfStep = 0;\r\n      } else {\r\n        sumOfStep += 1;\r\n      }\r\n      elapsedTime = timestamp - startStep; // unit is ms. This can be used within the raf_func().\r\n\r\n      if (trial.clear_canvas && !trial.pixi)\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n      if (trial.raf_func !== null) {\r\n        trial.raf_func(trial, elapsedTime, sumOfStep); // customize\r\n        frameRequestID = window.requestAnimationFrame(step);\r\n        return;\r\n      }\r\n\r\n      for (let i = 0; i < trial.stimuli.length; i++) {\r\n        const stim = trial.stimuli[i].instance;\r\n        const elapsed = stim.is_frame ? sumOfStep : elapsedTime;\r\n        const show_start = stim.is_frame\r\n          ? stim.show_start_frame\r\n          : stim.show_start_time;\r\n        const show_end = stim.is_frame\r\n          ? stim.show_end_frame\r\n          : stim.show_end_time;\r\n\r\n        if (stim.obj_type === \"sound\") {\r\n          if (elapsed >= show_start && !stim.is_presented) {\r\n            stim.play(); // play the sound.\r\n            stim.is_presented = true;\r\n          }\r\n          continue;\r\n        }\r\n\r\n        // visual stimuli\r\n        if (trial.pixi) {\r\n          // PixiJS can be used with the requestAnimationFrame function.\r\n          // See https://pixijs.download/v5.1.2/docs/PIXI.Ticker.html\r\n          if (elapsed < show_start) {\r\n            stim.pixi_obj.visible = false;\r\n            continue;\r\n          }\r\n          if (show_end !== null && elapsed >= show_end) {\r\n            stim.pixi_obj.visible = false;\r\n            continue;\r\n          }\r\n        } else {\r\n          if (elapsed < show_start) continue;\r\n          if (show_end !== null && elapsed >= show_end) continue;\r\n          if (trial.clear_canvas === false && stim.is_presented) continue;\r\n        }\r\n\r\n        stim.update_position(elapsed);\r\n\r\n        if (stim.drawFunc !== null) {\r\n          stim.drawFunc(stim, canvas, ctx, elapsedTime, sumOfStep);\r\n        } else {\r\n          if (stim.change_attr != null)\r\n            stim.change_attr(stim, elapsedTime, sumOfStep);\r\n          stim.show();\r\n        }\r\n        stim.is_presented = true;\r\n      }\r\n      frameRequestID = window.requestAnimationFrame(step);\r\n    }\r\n\r\n    // Start the step function.\r\n    let frameRequestID = window.requestAnimationFrame(step);\r\n\r\n    function deg2rad(degrees) {\r\n      return (degrees / 180) * Math.PI;\r\n    }\r\n\r\n    // store response\r\n    let response: any = {\r\n      rt: null,\r\n      key: null,\r\n    };\r\n\r\n    // function to end trial when it is time\r\n    // let end_trial = function() { // This causes an initialization error at stim.audio.addEventListener('ended', end_trial);\r\n    // function end_trial(){\r\n    const end_trial = () => {\r\n      // console.log(default_maxWidth)\r\n      document.getElementById(\"jspsych-content\").style.maxWidth =\r\n        default_maxWidth; // restore\r\n      window.cancelAnimationFrame(frameRequestID); //Cancels the frame request\r\n      canvas.removeEventListener(\"mousedown\", mouseDownFunc);\r\n\r\n      // remove event listeners defined by experimenters.\r\n      if (trial.mouse_down_func !== null) {\r\n        canvas.removeEventListener(\"mousedown\", trial.mouse_down_func);\r\n      }\r\n\r\n      if (trial.mouse_move_func !== null) {\r\n        canvas.removeEventListener(\"mousemove\", trial.mouse_move_func);\r\n      }\r\n\r\n      if (trial.mouse_up_func !== null) {\r\n        canvas.removeEventListener(\"mouseup\", trial.mouse_up_func);\r\n      }\r\n\r\n      if (trial.touchstart_func !== null){\r\n        canvas.removeEventListener(\"touchstart\", trial.touchstart_func);\r\n      }\r\n\r\n      if (trial.touchend_func !== null) {\r\n        canvas.removeEventListener(\"touchend\", trial.touchend_func);\r\n      }\r\n  \r\n      if (trial.touchcancel_func !== null) {\r\n        canvas.removeEventListener(\"touchcancel\", trial.touchcancel_func);\r\n      }\r\n  \r\n      if (trial.touchmove_func !== null) {\r\n        canvas.removeEventListener(\"touchmove\", trial.touchmove_func);\r\n      }\r\n\r\n      if (trial.key_down_func !== null) {\r\n        document.removeEventListener(\"keydown\", trial.key_down_func);\r\n      }\r\n\r\n      if (trial.key_up_func !== null) {\r\n        document.removeEventListener(\"keyup\", trial.key_up_func);\r\n      }\r\n\r\n      // stop the audio file if it is playing\r\n      // remove end event listeners if they exist\r\n      if (typeof trial.stimuli !== \"undefined\") {\r\n        // The stimuli could be 'undefined' if the raf_func is specified.\r\n        for (let i = 0; i < trial.stimuli.length; i++) {\r\n          const stim = trial.stimuli[i].instance;\r\n          if (typeof stim.pixi_obj !== \"undefined\") stim.pixi_obj.destroy();\r\n\r\n          // stim.is_presented = false;\r\n          // if (typeof stim.context !== 'undefined') { // If the stimulus is audio data\r\n          if (stim.obj_type === \"sound\") {\r\n            // If the stimulus is audio data\r\n            stim.stop();\r\n          }\r\n        }\r\n      }\r\n\r\n      if (!trial.remain_canvas && trial.pixi)\r\n        pixi_app.destroy(true, {\r\n          children: true,\r\n          texture: true,\r\n          baseTexture: true,\r\n        });\r\n\r\n      // kill any remaining setTimeout handlers\r\n      this.jsPsych.pluginAPI.clearAllTimeouts();\r\n\r\n      // kill keyboard listeners\r\n      if (typeof keyboardListener !== \"undefined\") {\r\n        this.jsPsych.pluginAPI.cancelKeyboardResponse(keyboardListener);\r\n      }\r\n\r\n      // kill keyboard listeners\r\n      this.jsPsych.pluginAPI.cancelAllKeyboardResponses();\r\n\r\n      // gather the data to store for the trial //音の再生時からの反応時間をとるわけではないから不要？\r\n      // if(context !== null && response.rt !== null){\r\n      //   response.rt = Math.round(response.rt * 1000);\r\n      // }\r\n\r\n      // gather the data to store for the trial\r\n      const trial_data = {};\r\n      trial_data[\"rt\"] = response.rt;\r\n      trial_data[\"response_type\"] = trial.response_type;\r\n      trial_data[\"key_press\"] = response.key;\r\n      trial_data[\"response\"] = response.key; // compatible with the jsPsych >= 6.3.0\r\n      trial_data[\"avg_frame_time\"] = elapsedTime / sumOfStep;\r\n      trial_data[\"center_x\"] = centerX;\r\n      trial_data[\"center_y\"] = centerY;\r\n\r\n      if (trial.response_type === \"mouse\") {\r\n        trial_data[\"click_x\"] = response.clickX;\r\n        trial_data[\"click_y\"] = response.clickY;\r\n      } else if (trial.response_type === \"button\") {\r\n        trial_data[\"button_pressed\"] = response.button;\r\n        trial_data[\"response\"] = response.button; // compatible with the jsPsych >= 6.3.0\r\n      }\r\n\r\n      // clear the display\r\n      if (!trial.remain_canvas) {\r\n        display_element.innerHTML = \"\";\r\n      }\r\n\r\n      // move on to the next trial\r\n      this.jsPsych.finishTrial(trial_data);\r\n    };\r\n    trial.end_trial = end_trial;\r\n\r\n    // function to handle responses by the subject\r\n    // let after_response = function(info) { // This causes an initialization error at stim.audio.addEventListener('ended', end_trial);\r\n    function after_response(info) {\r\n      if (!response_flag) return;\r\n\r\n      // const after_response = info => {\r\n\r\n      // after a valid response, the stimulus will have the CSS class 'responded'\r\n      // which can be used to provide visual feedback that a response was recorded\r\n      //display_element.querySelector('#jspsych-html-keyboard-response-stimulus').className += ' responded';\r\n\r\n      // only record the first response\r\n      if (response.key == null) {\r\n        response = info;\r\n      }\r\n\r\n      if (trial.response_type === \"button\") {\r\n        // after a valid response, the stimulus will have the CSS class 'responded'\r\n        // which can be used to provide visual feedback that a response was recorded\r\n        // display_element.querySelector('#jspsych-image-button-response-stimulus').className += ' responded';\r\n\r\n        // disable all the buttons after a response\r\n        let btns = document.querySelectorAll(\r\n          \".jspsych-image-button-response-button button\"\r\n        );\r\n        for (let i = 0; i < btns.length; i++) {\r\n          //btns[i].removeEventListener('click');\r\n          btns[i].setAttribute(\"disabled\", \"disabled\");\r\n        }\r\n      }\r\n\r\n      if (trial.response_ends_trial) {\r\n        end_trial();\r\n      }\r\n    }\r\n\r\n    // end trial if trial_duration is set\r\n    if (trial.trial_duration !== null) {\r\n      this.jsPsych.pluginAPI.setTimeout(function () {\r\n        end_trial();\r\n      }, trial.trial_duration);\r\n    }\r\n    // on_load();\r\n\r\n  }\r\n  simulate(trial, simulation_mode, simulation_options, load_callback) {\r\n    if (simulation_mode == \"data-only\") {\r\n      load_callback();\r\n      this.simulate_data_only(trial, simulation_options);\r\n    }\r\n    if (simulation_mode == \"visual\") {\r\n      this.simulate_visual(trial, simulation_options, load_callback);\r\n    }\r\n  }\r\n  create_simulation_data(trial, simulation_options) {\r\n    let resp = -1;\r\n    if (trial.response_type === \"key\") {\r\n      resp = this.jsPsych.pluginAPI.getValidKey(trial.choices);\r\n    }\r\n    if (trial.response_type === \"button\") {\r\n      resp = this.jsPsych.randomization.randomInt(\r\n        0,\r\n        trial.button_choices.length - 1\r\n      );\r\n    }\r\n    const default_data = {\r\n      stimulus: trial.stimulus,\r\n      rt: this.jsPsych.randomization.sampleExGaussian(500, 50, 1 / 150, true),\r\n      response: resp,\r\n    };\r\n    const data = this.jsPsych.pluginAPI.mergeSimulationData(\r\n      default_data,\r\n      simulation_options\r\n    );\r\n    this.jsPsych.pluginAPI.ensureSimulationDataConsistency(trial, data);\r\n    return data;\r\n  }\r\n  simulate_data_only(trial, simulation_options) {\r\n    const data = this.create_simulation_data(trial, simulation_options);\r\n    this.jsPsych.finishTrial(data);\r\n  }\r\n  simulate_visual(trial, simulation_options, load_callback) {\r\n    const data = this.create_simulation_data(trial, simulation_options);\r\n    const display_element = this.jsPsych.getDisplayElement();\r\n    this.trial(display_element, trial);\r\n    load_callback();\r\n    if (data.rt !== null) {\r\n      switch (trial.response_type) {\r\n        case \"key\":\r\n          this.jsPsych.pluginAPI.pressKey(data.response, data.rt);\r\n          break;\r\n        case \"button\":\r\n          this.jsPsych.pluginAPI.clickTarget(\r\n            display_element.querySelector(\r\n              `#jspsych-html-button-response-btngroup [data-choice=\"${data.response}\"]`\r\n            ),\r\n            data.rt\r\n          );\r\n          break;\r\n        case \"mouse\": {\r\n          const client_rect = document\r\n            .getElementById(\"myCanvas\")\r\n            .getBoundingClientRect();\r\n          if (typeof data.click_x === \"undefined\") data.click_x = 0;\r\n          if (typeof data.click_y === \"undefined\") data.click_y = 0;\r\n          const mouse_event = new MouseEvent(\"mousedown\", {\r\n            bubbles: true,\r\n            clientX: data.click_x + client_rect.left, // Note that click_x is offsetX.\r\n            clientY: data.click_y + client_rect.top,\r\n          });\r\n          setTimeout(() => {\r\n            document.getElementById(\"myCanvas\").dispatchEvent(mouse_event);\r\n          }, data.rt);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default PsychophysicsPlugin;\r\n"],"names":["canvas","ctx","centerX","centerY","info"],"mappings":"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"}